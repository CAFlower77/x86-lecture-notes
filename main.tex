%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% The Legrand Orange Book
% LaTeX Template
% Version 3.1 (February 18, 2022)
%
% This template originates from:
% https://www.LaTeXTemplates.com
%
% Authors:
% Vel (vel@latextemplates.com)
% Mathias Legrand (legrand.mathias@gmail.com)
%
% License:
% CC BY-NC-SA 4.0 (https://creativecommons.org/licenses/by-nc-sa/4.0/)
%
% Compiling this template:
% This template uses biber for its bibliography and makeindex for its index.
% When you first open the template, compile it from the command line with the 
% commands below to make sure your LaTeX distribution is configured correctly:
%
% 1) pdflatex main
% 2) makeindex main.idx -s indexstyle.ist
% 3) biber main
% 4) pdflatex main x 2
%
% After this, when you wish to update the bibliography/index use the appropriate
% command above and make sure to compile with pdflatex several times 
% afterwards to propagate your changes to the document.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%----------------------------------------------------------------------------------------
%	PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%----------------------------------------------------------------------------------------

\documentclass[
	11pt, % Default font size, select one of 10pt, 11pt or 12pt
	a4paper, % Paper size, use either 'a4paper' for A4 size or 'letterpaper' for US letter size
	%oneside, % Uncomment for oneside mode, this doesn't start new chapters and parts on odd pages (adding an empty page if required), this mode is more suitable if the book is to be read on a screen instead of printed
]{LegrandOrangeBook}

\usepackage{ctex}

%生成随机文本
\usepackage{lipsum,zhlipsum}


% Book information for PDF metadata, remove/comment this block if not required 
\hypersetup{
	pdftitle={Title}, % Title field
	pdfauthor={Author}, % Author field
	pdfsubject={Subject}, % Subject field
	pdfkeywords={Keyword1, Keyword2, ...}, % Keywords
	pdfcreator={LaTeX}, % Content creator field
}

\usepackage{xcolor}
\usepackage{xcolor-solarized}

\usepackage{tcolorbox}
\tcbuselibrary{skins, listings, breakable, theorems}

\definecolor{ocre}{RGB}{243, 102, 25}

% 用chapterimage设置背景
\chapterimage{Images/bgp1.jpg} % Chapter heading image
% 修改章节标题到纸面顶端的距离
\chapterspaceabove{7.85cm} % Default whitespace from the top of the page to the chapter title on chapter pages
% 修改文本第一行标题到纸面顶端的距离
\chapterspacebelow{8.1cm} % Default amount of vertical whitespace from the top margin to the start of the text on chapter pages


\usepackage{tikz, float, booktabs, listings, fontspec}

\newfontfamily\codefamily{Code New Roman Nerd Font Complete.otf}

\usepackage{circuitikz}

% MATH
\usepackage{amsmath, esint, siunitx, amsopn, mathtools, bm, bbm}
\let\div\imareallyundefinedcommand
\let\Re\imareallyundefinedcommand
\let\Im\imareallyundefinedcommand
\DeclareMathOperator{\grad}{grad}
\DeclareMathOperator{\div}{div}
\DeclareMathOperator{\rot}{rot}
\DeclareMathOperator{\curl}{curl}
\DeclareMathOperator{\Re}{Re}
\DeclareMathOperator{\Im}{Im}
\DeclareMathOperator{\sech}{sech}
\DeclareMathOperator{\csch}{csch}
\DeclareMathOperator{\arc}{arc}
\let\mod\imareallyundefinedcommand
\DeclareMathOperator{\mod}{mod}
\DeclareMathOperator{\band}{\texttt{and}}
\DeclareMathOperator{\bor}{\texttt{or}}
\DeclareMathOperator{\bnot}{\texttt{not}}
\DeclareMathOperator{\bxor}{\texttt{xor}}
\DeclareMathOperator{\bxnor}{\texttt{xnor}}
\renewcommand{\leq}{\leqslant}
\renewcommand{\geq}{\geqslant}
\newcommand{\set}{\leftarrow}

%----------------------------------------------------------------------------------------
%	LSTLISTING STYLE protobuf
%----------------------------------------------------------------------------------------
\renewcommand{\lstlistlistingname}{代码汇总}
\renewcommand{\lstlistingname}{代码}
\newcommand{\SetProtoColorsSolarized}{
	% Colors taken from the 'solarized' color scheme of Ethan Schoonover
	% (with light background)
	% http://ethanschoonover.com/solarized
	\definecolor{codehook}{RGB}{148,167,243}
	\colorlet{proto_basic}{solarized-base00}
	\colorlet{proto_keyword}{solarized-cyan}
	\colorlet{proto_type}{solarized-cyan}
	\colorlet{proto_options}{solarized-cyan}
	\colorlet{proto_comment}{solarized-base1}
	\colorlet{proto_string}{solarized-blue}
	\colorlet{proto_number}{solarized-violet}
	\colorlet{proto_ident}{solarized-base00}
	\colorlet{proto_digits}{solarized-violet}
	\colorlet{proto_background}{solarized-base3}
}
\newcommand{\SetProtoColorsBlueish}{
	% Colors inspired by the NASM style of Robin Eklind
	% https://github.com/mewspring/latex
	\definecolor{codehook}{RGB}{0,139,139}
	\definecolor{proto_basic}{RGB}{0,0,0}             % black
	\definecolor{proto_keyword}{RGB}{0,0,255}         % blue
	\definecolor{proto_type}{RGB}{128,0,0}            % dark red
	\definecolor{proto_options}{RGB}{128,0,128}       % purple
	\definecolor{proto_comment}{RGB}{0,128,0}         % dark green
	\definecolor{proto_string}{RGB}{255,0,0}          % red
	\definecolor{proto_number}{RGB}{108,113,196}      % violet
	\definecolor{proto_ident}{RGB}{0,0,0}             % black
	\definecolor{proto_digits}{RGB}{0,0,128}          % dark blue
	\definecolor{proto_background}{RGB}{255,255,255}  % white
}
\newcommand{\SetProtoColorsTomorrow}{
	% Colors taken from the 'Tomorrow' color scheme of Chris Kempson
	% https://github.com/chriskempson/tomorrow-theme/blob/master/vim/colors/Tomorrow.vim
	\definecolor{codehook}{RGB}{255, 99, 71}
	\definecolor{proto_basic}{RGB}{77, 77, 76}          % dark grey
	\definecolor{proto_keyword}{RGB}{245, 135, 31}      % orange
	\definecolor{proto_type}{RGB}{66, 113, 174}         % purple
	\definecolor{proto_options}{RGB}{137, 89, 168}
	\definecolor{proto_comment}{RGB}{142, 144, 140}
	\definecolor{proto_string}{RGB}{113, 140, 0}        % green
	\definecolor{proto_number}{RGB}{137, 89, 168}
	\definecolor{proto_ident}{RGB}{200, 40, 41}         % red
	\definecolor{proto_digits}{RGB}{245, 135, 31}       % orange
	\definecolor{proto_background}{RGB}{255, 255, 255}  % white
}
%\SetProtoColorsSolarized{}
%\SetProtoColorsTomorrow{}
\SetProtoColorsBlueish{}
\lstset{
	xleftmargin=\parindent,
	belowcaptionskip=1\baselineskip,
	backgroundcolor=\color{proto_background},
	basicstyle=\color{proto_basic}\small\codefamily,
	keywordstyle=[1]\color{proto_keyword},
	keywordstyle=[2]\color{proto_type},
	keywordstyle=[3]\color{proto_options},
	commentstyle=\color{proto_comment},
	stringstyle=\color{proto_string},
	numberstyle=\color{proto_number}\itshape\footnotesize,
	identifierstyle=\color{proto_ident},
	numbers=left,
	numbersep=10pt,
	breaklines=true,
	showstringspaces=false,
	tabsize=4,
	columns=flexible,
	% This 'literate' block is responsible for colouring numbers
	% appearing in the code
	literate={0}{{\textcolor{proto_digits}{0}}}{1}%
		{1}{{\textcolor{proto_digits}{1}}}{1}%
		{2}{{\textcolor{proto_digits}{2}}}{1}%
		{3}{{\textcolor{proto_digits}{3}}}{1}%
		{4}{{\textcolor{proto_digits}{4}}}{1}%
		{5}{{\textcolor{proto_digits}{5}}}{1}%
		{6}{{\textcolor{proto_digits}{6}}}{1}%
		{7}{{\textcolor{proto_digits}{7}}}{1}%
		{8}{{\textcolor{proto_digits}{8}}}{1}%
		{9}{{\textcolor{proto_digits}{9}}}{1}%
		{.0}{{\textcolor{proto_digits}{.0}}}{2}%
		{.1}{{\textcolor{proto_digits}{.1}}}{2}%
		{.2}{{\textcolor{proto_digits}{.2}}}{2}%
		{.3}{{\textcolor{proto_digits}{.3}}}{2}%
		{.4}{{\textcolor{proto_digits}{.4}}}{2}%
		{.5}{{\textcolor{proto_digits}{.5}}}{2}%
		{.6}{{\textcolor{proto_digits}{.6}}}{2}%
		{.7}{{\textcolor{proto_digits}{.7}}}{2}%
		{.8}{{\textcolor{proto_digits}{.8}}}{2}%
		{.9}{{\textcolor{proto_digits}{.9}}}{2}%
		% We need to add some hacks - otherwise 'listings' would
		% colour (only) the digits in the types instead of the type
		{int32}{{\textcolor{proto_type}{int32}}}{5}%
		{int64}{{\textcolor{proto_type}{int64}}}{5}%
		{uint32}{{\textcolor{proto_type}{uint32}}}{6}%
		{uint64}{{\textcolor{proto_type}{uint64}}}{6}%
		{sint32}{{\textcolor{proto_type}{sint32}}}{6}%
		{sint64}{{\textcolor{proto_type}{sint64}}}{6}%
		{fixed32}{{\textcolor{proto_type}{fixed32}}}{7}%
		{fixed64}{{\textcolor{proto_type}{fixed64}}}{7}%
		{sfixed32}{{\textcolor{proto_type}{sfixed32}}}{8}%
		{sfixed64}{{\textcolor{proto_type}{sfixed64}}}{8}%
		{java_string_check_utf8}{{%
			\textcolor{proto_options}{java_string_check_utf8}}}{2}%
		{\ }{{ }}{1},
	prebreak=\raisebox{0ex}[0ex][0ex]{\quad\textcolor{codehook}{\ensuremath{\hookleftarrow}}},
	upquote=true,
	escapeinside={<ESC|}{|ESC>}
}


\begin{document}

%----------------------------------------------------------------------------------------
%	TITLE PAGE
%----------------------------------------------------------------------------------------

\titlepage % Output the title page
	{\includegraphics[width=\paperwidth]{background.pdf}} % Code to output the background image, which should be the same dimensions as the paper to fill the page entirely; leave empty for no background image
	{ % Title(s) and author(s)
		\centering\sffamily % Font styling
		{\Huge\bfseries x86汇编语言：从实模式到保护模式\par} % Book title
		\vspace{16pt} % Vertical whitespace
		{\huge Lecture Notes\par} % Subtitle
		\vspace{24pt} % Vertical whitespace
		{\Large\texttt{FlowerCA77\quad <ca538468142\char`@outlook.com>}\par} % Author name
	}

%----------------------------------------------------------------------------------------
%	COPYRIGHT PAGE
%----------------------------------------------------------------------------------------

\thispagestyle{empty} % Suppress headers and footers on this page

~\vfill % Push the text down to the bottom of the page

\noindent Copyright \copyright\ 2023 \texttt{FlowerCA77 <ca538468142\char`@outlook.com>}\\ % Copyright notice

\noindent \textsc{Not Published}\\ % Publisher

\noindent 《中华人民共和国著作权法》第二章第四节第二十二条：\\
在下列情况下使用作品，可以不经著作权人许可，不向其支付报酬，但应当指明作者姓名或者名称、作品名称，并且不得影响该作品的正常使用，也不得不合理地损害著作权人的合法权益：\\
$\cdots$\\
（六）为学校课堂教学或者科学研究，翻译、改编、汇编、播放或者少量复制已经发表的作品，供教学或者科研人员使用，但不得出版发行；\\
$\cdots$\\ % License information, replace this with your own license (if any)

%----------------------------------------------------------------------------------------
%	TABLE OF CONTENTS
%----------------------------------------------------------------------------------------

\pagestyle{empty} % Disable headers and footers for the following pages

\tableofcontents % Output the table of contents

\pagestyle{fancy} % Enable default headers and footers again

\cleardoublepage % Start the following content on a new page

\chapterimage{Images/bgp2.png}
\include{includes/ch0.tex}
\numberwithin{equation}{chapter}

\chapterimage{Images/bgp1.png}
\addcontentsline{toc}{chapter}{参考文献}
\nocite{*}
\bibliographystyle{ieeetr}
\bibliography{sample.bib}


\end{document}
